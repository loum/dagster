AIRFLOW_HOME=/opt/airflow/airflow
AIRFLOW_CUSTOM_ENV=dev
AIRFLOW_CUSTOM_CONFIG=/home/airflow/.local/lib/python3.11/site-packages/dagster/config


# PostgreSQL params in Airflow Containers
POSTGRES_USER=airflow
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-airflow}
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=airflow
POSTGRES_EXTRAS=
PGDATA=/var/lib/postgresql/data/pgdata/db-files


# Celery/Redis
REDIS_PASSWORD=redispass
REDIS_PROTO=redis://
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redispass
REDIS_DBNUM=1
AIRFLOW__CELERY__BROKER_URL=redis://redis:6379/1
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@postgres:5432/airflow?


# airflow.cfg [core]
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__DAGS_FOLDER=/home/airflow/.local/lib/python3.11/site-packages/dagster/dags
AIRFLOW__CORE__PLUGINS_FOLDER=/home/airflow/.local/lib/python3.11/site-packages/dagster/plugins
AIRFLOW__CORE__LOAD_EXAMPLES=False
AIRFLOW__CORE__UNIT_TEST_MODE=False

# Enable DAG Serialization
AIRFLOW__CORE__STORE_SERIALIZED_DAGS=True
AIRFLOW__CORE__MIN_SERIALIZED_DAG_UPDATE_INTERVAL=30

# Encryption
AIRFLOW__CORE__FERNET_KEY="LFKF4PSrAOG-kbxOouoLj8Du2QCnsp9qw7G21-WPsLU="

# airflow.cfg [database]
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql://airflow:airflow@postgres:5432/airflow?
AIRFLOW__DATABASE__LOAD_DEFAULT_CONNECTIONS=False
AIRFLOW__DATABASE__CHECK_MIGRATIONS=False

# airflow.cfg [webserver]
AIRFLOW__WEBSERVER__DAG_DEFAULT_VIEW=graph
AIRFLOW__WEBSERVER__WEB_SERVER_PORT=8443
AIRFLOW__WEBSERVER__WORKERS=1
AIRFLOW__WEBSERVER__WORKER_REFRESH_BATCH_SIZE=1
AIRFLOW__WEBSERVER__WEB_SERVER_SSL_CERT=/etc/ssl/certs/airflow-selfsigned.crt
AIRFLOW__WEBSERVER__WEB_SERVER_SSL_KEY=/home/airflow/ssl/private/airflow-selfsigned.key

# airflow.cfg [schedule]
AIRFLOW__SCHEDULER__PRINT_STATS_INTERVAL=300
AIRFLOW__SCHEDULER__SCHEDULER_IDLE_SLEEP_TIME=5

# airflow.cfg [logging]
AIRFLOW__LOGGING__BASE_LOG_FOLDER=/var/log/airflow
AIRFLOW__LOGGING__REMOTE_LOGGING=False
